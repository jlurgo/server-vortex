<!doctype html>
<html>
    <head>
        <title>title</title>
    </head>
    <body>
        <div>
            Mensajes Recibidos: 
        </div>
        <div id="contador_de_mensajes">
            
        </div>
    </body>
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script> 
    <script type="text/javascript" src="underscore-min.js"></script>
    <script type="text/javascript" src="socket.io.js"></script>
    <script type="text/javascript" src="Filtros.js"></script>
    <script type="text/javascript" src="NodoRouter.js"></script> 
    <script type="text/javascript" src="NodoClienteHTTP.js"></script> 
    <script type="text/javascript" src="NodoConectorSocket.js"></script>
    <script type="text/javascript" src="NodoNulo.js"></script>
	<script type="text/javascript" src="Vortex.js"></script> 

    <script>
        $(document).ready(function () {
            var div_contador = $('#contador_de_mensajes');
            var mensajes_recibidos = 0;
            div_contador.text(mensajes_recibidos.toString());
            //var adaptador = new NodoClienteHTTP('http://router-vortex.herokuapp.com', 10, true, 1000);
            //var adaptador = new NodoClienteHTTP('http://localhost:3000', 10, true, 5);
            
            var socket = io.connect('http://localhost:3000');    
            //var socket = io.connect('https://server-vortex.herokuapp.com');
            var adaptador = new NodoConectorSocket({socket:socket});    
			
			Vx.conectarCon(adaptador); 
			
            Vx.when({contenido:'pruebaHTTP'}, function (mensaje) {
				mensajes_recibidos += 1;
				div_contador.text(mensajes_recibidos.toString());
                Vx.send({
                    tipoDeMensaje: "Vortex.respuesta",
                    responseTo: mensaje.idRequest
                });
			});        
        });
    </script>
</html>